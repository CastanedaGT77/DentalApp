<mat-card class="cardWithShadow p-6">
  <!-- Sección de Noticias -->
  <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">
    Noticias Recientes
  </h1>

  <div class="relative overflow-hidden">
    <!-- Contenedor del carrusel -->
    <div
      class="flex transition-transform duration-500 ease-in-out"
      [style.transform]="'translateX(-' + currentIndex * 100 + '%)'"
    >
      <div
        *ngFor="let news of newsData"
        class="w-full flex-shrink-0 flex flex-col items-center"
      >
        <mat-card
          class="w-full max-w-md md:max-w-sm shadow-lg rounded-lg hover:shadow-xl transition duration-300 ease-in-out"
        >
          <img
            [src]="news.image"
            alt="News Image"
            class="w-full h-48 md:h-56 object-cover rounded-t-lg"
          />
          <mat-card-content class="p-4">
            <h2 class="text-base md:text-lg font-semibold text-gray-800 text-center">
              {{ news.title }}
            </h2>
            <p class="text-xs md:text-sm text-gray-600 mb-2 text-center">
              {{ news.date | date }}
            </p>
            <p class="text-sm text-gray-700 line-clamp-2 text-center">
              {{ news.description }}
            </p>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Botones de navegación -->
    <button
    class="absolute top-1/2 left-4 transform -translate-y-1/2 bg-black text-black p-4 rounded-full hover:bg-gray-900 shadow-lg opacity-80 hover:opacity-100"
    (click)="prevSlide()"
    >
      <mat-icon fontIcon="arrow_back" class="text-2xl"></mat-icon>
    </button>
    <button
      class="absolute top-1/2 right-4 transform -translate-y-1/2 bg-black text-black p-4 rounded-full hover:bg-gray-900 shadow-lg opacity-80 hover:opacity-100"
      (click)="nextSlide()"
    >
      <mat-icon fontIcon="arrow_forward" class="text-2xl"></mat-icon>
    </button>
 </div>

 <!-- Indicadores del carrusel -->
 <div class="flex justify-center mt-4">
   <span
     *ngFor="let news of newsData; let i = index"
     class="h-2 md:h-3 w-2 md:w-3 mx-1 md:mx-2 rounded-full cursor-pointer"
     [ngClass]="{
       'bg-gray-700': i === currentIndex,
       'bg-gray-300': i !== currentIndex
     }"
     (click)="goToSlide(i)"
   ></span>
 </div>
</mat-card>

  <!-- Consulta de Citas -->
  <h1 class="text-3xl font-bold text-gray-800 text-center mb-6">
    Consulta tus Citas
  </h1>

  <!-- Formulario -->
  <form
    [formGroup]="userForm"
    (ngSubmit)="onLoadUserAppointments()"
    class="flex flex-col gap-4 mb-6"
  >
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <mat-form-field class="w-full">
        <mat-label>Primer Nombre</mat-label>
        <input matInput formControlName="firstName" placeholder="Ejemplo: Juan" />
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label>Primer Apellido</mat-label>
        <input matInput formControlName="lastName" placeholder="Ejemplo: Pérez" />
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label>Código de Usuario</mat-label>
        <input
          matInput
          formControlName="userCode"
          placeholder="Ejemplo: USR001"
        />
      </mat-form-field>
    </div>
    <button mat-raised-button color="primary" class="w-full md:w-auto" type="submit">
      Buscar
    </button>
  </form>

  <!-- Mensajes -->
  <div *ngIf="errorMessage" class="text-red-500 text-center mb-4">
    {{ errorMessage }}
  </div>
  <div *ngIf="successMessage" class="text-green-500 text-center mb-4">
    {{ successMessage }}
  </div>

  <!-- Información del Paciente -->
  <div *ngIf="valid" class="mb-4">
    <h2 class="text-xl font-bold text-gray-800">
      Paciente: {{ userForm.get('firstName')?.value }} {{ userForm.get('lastName')?.value }}
    </h2>
  </div>

  <!-- Tabla de Resultados -->
  <div *ngIf="appointments.length > 0" class="overflow-x-auto shadow-lg rounded-lg">
    <button
      mat-raised-button
      color="accent"
      class="mb-4"
      (click)="onScheduleAppointment()"
    >
      Agendar Cita
    </button>
    <table
      mat-table
      [dataSource]="dataSource"
      class="mat-elevation-z8 w-full rounded-lg"
    >
      <!-- Columnas -->
      <ng-container matColumnDef="codCita">
        <th mat-header-cell *matHeaderCellDef>Código</th>
        <td mat-cell *matCellDef="let element">{{ element.codCita }}</td>
      </ng-container>
      <ng-container matColumnDef="fecha">
        <th mat-header-cell *matHeaderCellDef>Fecha</th>
        <td mat-cell *matCellDef="let element">{{ element.fecha }}</td>
      </ng-container>
      <ng-container matColumnDef="hora">
        <th mat-header-cell *matHeaderCellDef>Hora</th>
        <td mat-cell *matCellDef="let element">{{ element.hora }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>

  <div *ngIf="appointments.length === 0 && !valid && !errorMessage" class="text-gray-500 text-center">
    No existen citas para los datos ingresados.
  </div>